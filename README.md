# رقبا(بررسی قیمت و عملکرد فروشگاه‌های رقیب)
## درباره پروژه
    ایده اصلی پروژه یک نرم‌افزار درون سازمانی تحت وب بسیار ساده است که نیاز به لاگین یا ثبت نام نداشته باشد
    و با یه دکمه کرالر را راه‌اندازی کند و به راحتی بتوان در اطلاعات ثبت شده در دیتابیس جست و جو کرد.
    در این پروژه از زبان پایتون استفاده شده و از استایل‌های دستی و فریم ورک بوت‌استرپ برای طراحی صفحات  سمت کاربر استفاده شده است.
## پیش نیازها
- پایتون ۳
- فریم ورک فلاسک
- فریم ورک beautifulsoup
- پکیج‌های موجود در فایل `requirements.txt`


## نصب و راه‌اندازی
### دیتابیس

یک دیتابیس بسازید، و نام آن را `simplecrawl` یا هر نام دیگری قرار ‌دهید.

سپس فایل‌های `app/views.py`و `app/tasks.py` را اصلاح کنید و نام دیتابیس و نام‌کاربری و رمزعبور خودتان را بنویسید.

دلیل وجود دو کانفیگ جدا برای دیتابیس `mysql` به خاطر پکیج‌های مختلفی است که در هر ماژول کار می‌کنند.

-------------------------
نکته: اگر دیتابیس را متصل نکنید قابلیت جست و جو در سایت از شما گرفته خواهد شد و فقط فایل csv به شما داده خواهید دید
------------------------
### نصب پکیج‌ها

```
$ pip install -r requirements.txt
```

### راه اندازی فلاسک

وارد پروشه root پروژه شوید، و دستورات زیر را وارد کنید:
ترتیب دستورات مهم است.

```
pip install -r requirements.txt

$ export FLASK_APP=run.py
```

ابتدا باید سرور redis را اجرا کنید:

```
$ redis-server
```

سپس یک کارگزار برای انجام وظیفه کرال فعال کنید.

```
$ rq-worker
```

حالا پروژه فلسک را با دستور زیر اجرا کنید:

```
$ flask run
```


وارد  آدرس 127.0.0.1:5000 شوید.

به جای 127.0.0.1 می‌توانید localhost هم بنویسید.


برای اولین بار باید یکبار مراحل کرالینگ انجام شود و قبلا از آن می‌بایست دیتابیس خود را راه‌اندازی کنید.

در ترمینال سومی که باز کردید لاگ‌های عمل کرال به نمایش در خواهند آمد و در ترمینال اول لاگ روتینگ شما در سایت نمایش داده می‌شود.


با رفتن به آدرس `/rq` می‌توانید گزارش لحظه‌ای کارگزار را تحت وب ببینید.

برای مشاهده محصولات نیز می‌توانید از قسمت جست و جو در بالای سایت استفاده کنید.

دلیل خالی بودن صفحه اصلی سایت خاطر متمایز کردن این سایت از سایت‌های فروشگاهی بود.

با مراجعه به آدرس‌ `/product/{id}` می‌توانید محصولات را ببینید که این با کلیک بر دکمه جزئیات محصول نیز امکان پذیر است.


## تماس

### ایمیل
ma.hiccup@gmail.com

## مرام‌نامه

این یک نمونه کار و پروژه دانشجویی است پس اگر می‌خواهید از کرالر این پروژه استفاده کنید حتما از سایت مربوطه اجازه نامه کسب کنید چرا که باعث ایجاد بار اضافه بر روی سرورها خواهید شد.

همچنین بنده هر مسئولیتی در قبال استفاده دیگران از کرالر را از خودم سلب می‌کنم.

## توصیه

    دریافت و ارسال اطلاعات در این پروژه در بهترین حالت ۱۰ دیقه و در بدترین حالت ۳۰ تا ۴۰ دقیقه طول می‌کشد.

    لطفا در ارسال ریکوئست به سایت‌ها شریف باشید و از ارسال ۵ ریکوئست در ثانیه بیشتر خود‌داری کنید چرا که باعث آسیب به سرور‌های سایت‌های هدف خواهید شد.
